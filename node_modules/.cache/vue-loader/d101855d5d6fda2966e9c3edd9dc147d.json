{"remainingRequest":"D:\\userFiles\\20201230\\managersystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\userFiles\\20201230\\managersystem\\src\\components\\params.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\userFiles\\20201230\\managersystem\\src\\components\\params.vue","mtime":1609837295684},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\babel-loader\\lib\\index.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1609391769000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAicGFyYW1zIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLyog5LiO57qn6IGU5paw6YCJ5oup5Zmo5Y+M5ZCR57uR5a6a6I635Y+W6YCJ5a6a55qE5pWw5o2uICovCiAgICAgIHZhbHVlOiBbXSwKICAgICAgb3B0aW9uczogW10sCiAgICAgIGFjdGl2ZU5hbWU6ICJtYW55IiwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgc2VsOiAibWFueSIsCiAgICAgIGNhdF9pZDogIiIsCiAgICAgIGF0dHJfaWQ6ICIiLAogICAgICBlZGl0Rm9ybVZpc2libGU6IGZhbHNlLAogICAgICBmb3JtTGFiZWxXaWR0aDogIjEyMHB4IiwKICAgICAgZWRpdFBhcmFtRm9ybTogewogICAgICAgIGF0dHJfbmFtZTogIiIsCiAgICAgICAgYXR0cl92YWxzOiAiIiwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDbGljayh0YWIpIHsKICAgICAgY29uc29sZS5sb2codGFiKTsKICAgICAgdGhpcy5zZWwgPSB0YWIubmFtZTsKICAgICAgdGhpcy5nZXRQYXJhbXModGhpcy52YWx1ZVt0aGlzLnZhbHVlLmxlbmd0aCAtIDFdLCB7CiAgICAgICAgc2VsOiB0aGlzLnNlbCwKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlKHZhbHVlKSB7CiAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTsKICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgICB0aGlzLmdldFBhcmFtcyh0aGlzLnZhbHVlW3RoaXMudmFsdWUubGVuZ3RoIC0gMV0sIHsKICAgICAgICBzZWw6IHRoaXMuc2VsLAogICAgICB9KTsKICAgIH0sCiAgICAgLyog5Yig6Zmk5Y+C5pWwICovCiAgICBoYW5kbGVEZWxldGUoaW5kZXgscm93KXsKICAgICAgdGhpcy4kcmVxdWVzdC5kZWxldGVQYXJhbXMocm93LmNhdF9pZCxyb3cuYXR0cl9pZCkudGhlbihyZXM9PnsKICAgICAgICBpZihyZXMuZGF0YS5tZXRhLnN0YXR1cz09MjAwKXsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvKiDnvJbovpHlj4LmlbAgKi8KICAgIGhhbmRsZUVkaXQoaW5kZXgsIHJvdykgewogICAgICB0aGlzLmVkaXRGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuZWRpdFBhcmFtRm9ybS5hdHRyX25hbWUgPSByb3cuYXR0cl9uYW1lOwogICAgICB0aGlzLmVkaXRQYXJhbUZvcm0uYXR0cl92YWxzID0gcm93LmF0dHJfdmFsczsKICAgICAgdGhpcy5jYXRfaWQgPSByb3cuY2F0X2lkOwogICAgICB0aGlzLmF0dHJfaWQgPSByb3cuYXR0cl9pZDsKICAgIH0sCiAgICAvKiDnoa7orqTnvJbovpEgKi8KICAgIGhhbmRsZUNvbmZpcm1FZGl0KCkgewogICAgICB0aGlzLmVkaXRGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLiRyZXF1ZXN0CiAgICAgICAgLmVkaXRQYXJhbSh0aGlzLmNhdF9pZCwgdGhpcy5hdHRyX2lkLCB0aGlzLmVkaXRQYXJhbUZvcm0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlcygi5L+u5pS55oiQ5YqfIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgLyog6I635Y+W5YiG57G7ICovCiAgICBnZXRDYXRlZ29yaWVzKCkgewogICAgICB0aGlzLiRyZXF1ZXN0CiAgICAgICAgLmdldENhdGVnb3JpZXMoewogICAgICAgICAgdHlwZTogWzEsIDIsIDNdLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIC8qIOiOt+WPluWPguaVsCAqLwogICAgZ2V0UGFyYW1zKGlkLCBwYXJhbXMpIHsKICAgICAgdGhpcy4kcmVxdWVzdC5nZXRQYXJhbXMoaWQsIHBhcmFtcykudGhlbigocmVzKSA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENhdGVnb3JpZXMoKTsKICB9LAp9Owo="},{"version":3,"sources":["params.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"params.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"params\">\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"breadcrumb\">\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\n      <el-breadcrumb-item>分类参数</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-alert\n      title=\"注意：只允许为第三级分类设置相关参数\"\n      type=\"warning\"\n      class=\"el-icon-warning warning-info\"\n    >\n    </el-alert>\n    <el-row class=\"select-wrapper\">\n      <el-col :span=\"5\" class=\"select-title\">\n        <h2>请选择商品分类：</h2>\n      </el-col>\n      <el-col :span=\"19\">\n        <div class=\"grid-content bg-purple-dark\">\n          <el-cascader\n            :options=\"options\"\n            :props=\"{\n              expandTrigger: 'hover',\n              label: 'cat_name',\n              value: 'cat_id',\n            }\"\n            v-model=\"value\"\n            @change=\"handleChange\"\n          >\n            <!-- <template slot-scope=\"{ node, data }\">\n              <span>{{ data.cat_name }}</span>\n              <span v-if=\"!node.isLeaf\"> ({{ data.children.length }}) </span>\n            </template> -->\n          </el-cascader>\n        </div>\n      </el-col>\n    </el-row>\n\n    <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\n      <el-tab-pane label=\"动态参数\" name=\"many\">\n        <el-button type=\"primary\" disabled>添加动态参数</el-button>\n        <el-table :data=\"tableData\" border style=\"width: 100%\">\n          <el-table-column type=\"index\" label=\"#\" width=\"auto\">\n          </el-table-column>\n          <el-table-column prop=\"attr_name\" label=\"属性名\" width=\"auto\">\n          </el-table-column>\n          <el-table-column prop=\"attr_vals\" label=\"属性值\" width=\"auto\">\n          </el-table-column>\n\n          <el-table-column prop=\"date\" label=\"操作\" width=\"auto\">\n            <template slot-scope=\"scope\">\n              <el-button\n                size=\"mini\"\n                icon=\"el-icon-edit\"\n                @click=\"handleEdit(scope.$index, scope.row)\"\n              ></el-button>\n              <el-button\n                size=\"mini\"\n                type=\"danger\"\n                icon=\"el-icon-delete\"\n                @click=\"handleDelete(scope.$index, scope.row)\"\n              ></el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-tab-pane>\n      <el-tab-pane label=\"静态参数\" name=\"only\">\n        <el-button type=\"primary\" disabled>添加静态参数</el-button>\n        <el-table :data=\"tableData\" border style=\"width: 100%\">\n          <el-table-column type=\"index\" label=\"#\" width=\"auto\">\n          </el-table-column>\n          <el-table-column prop=\"attr_name\" label=\"属性名\" width=\"auto\">\n          </el-table-column>\n          <el-table-column prop=\"attr_vals\" label=\"属性值\" width=\"auto\">\n          </el-table-column>\n          <el-table-column label=\"操作\" width=\"auto\">\n            <template slot-scope=\"scope\">\n              <el-button\n                size=\"mini\"\n                icon=\"el-icon-edit\"\n                @click=\"handleEdit(scope.$index, scope.row)\"\n              ></el-button>\n              <el-button\n                size=\"mini\"\n                type=\"danger\"\n                icon=\"el-icon-delete\"\n                @click=\"handleDelete(scope.$index, scope.row)\"\n              ></el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <el-dialog title=\"编辑参数\" :visible.sync=\"editFormVisible\">\n          <el-form :model=\"editParamForm\">\n            <el-form-item label=\"属性名\" :label-width=\"formLabelWidth\" width=\"100%\">\n              <el-input\n                v-model=\"editParamForm.attr_name\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item label=\"属性值\" :label-width=\"formLabelWidth\">\n              <el-input\n                v-model=\"editParamForm.attr_vals\"\n                autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n          </el-form>\n          <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"editFormVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"handleConfirmEdit\"\n              >确 定</el-button\n            >\n          </div>\n        </el-dialog>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"params\",\n  data() {\n    return {\n      /* 与级联新选择器双向绑定获取选定的数据 */\n      value: [],\n      options: [],\n      activeName: \"many\",\n      tableData: [],\n      sel: \"many\",\n      cat_id: \"\",\n      attr_id: \"\",\n      editFormVisible: false,\n      formLabelWidth: \"120px\",\n      editParamForm: {\n        attr_name: \"\",\n        attr_vals: \"\",\n      },\n    };\n  },\n  methods: {\n    handleClick(tab) {\n      console.log(tab);\n      this.sel = tab.name;\n      this.getParams(this.value[this.value.length - 1], {\n        sel: this.sel,\n      });\n    },\n    handleChange(value) {\n      console.log(value);\n      this.value = value;\n      this.getParams(this.value[this.value.length - 1], {\n        sel: this.sel,\n      });\n    },\n     /* 删除参数 */\n    handleDelete(index,row){\n      this.$request.deleteParams(row.cat_id,row.attr_id).then(res=>{\n        if(res.data.meta.status==200){\n          this.$message.success(\"删除成功\");\n        }\n      });\n    },\n    /* 编辑参数 */\n    handleEdit(index, row) {\n      this.editFormVisible = true;\n      this.editParamForm.attr_name = row.attr_name;\n      this.editParamForm.attr_vals = row.attr_vals;\n      this.cat_id = row.cat_id;\n      this.attr_id = row.attr_id;\n    },\n    /* 确认编辑 */\n    handleConfirmEdit() {\n      this.editFormVisible = false;\n      this.$request\n        .editParam(this.cat_id, this.attr_id, this.editParamForm)\n        .then((res) => {\n          if (res.data.meta.status == 200) {\n            this.$message.succes(\"修改成功\");\n          }\n        });\n    },\n    /* 获取分类 */\n    getCategories() {\n      this.$request\n        .getCategories({\n          type: [1, 2, 3],\n        })\n        .then((res) => {\n          if (res.data.meta.status == 200) {\n            console.log(res);\n            this.options = res.data.data;\n          }\n        });\n    },\n    /* 获取参数 */\n    getParams(id, params) {\n      this.$request.getParams(id, params).then((res) => {\n        if (res.data.meta.status == 200) {\n          console.log(res);\n          this.tableData = res.data.data;\n        }\n      });\n    },\n  },\n  created() {\n    this.getCategories();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n#params {\n  .breadcrumb {\n    height: 50px;\n    line-height: 50px;\n  }\n  .warning-info {\n    margin-top: 20px;\n    margin-bottom: 20px;\n  }\n  .select-wrapper {\n    .select-title {\n      h2 {\n        height: 40px;\n        line-height: 40px;\n      }\n    }\n  }\n}\n</style>"]}]}