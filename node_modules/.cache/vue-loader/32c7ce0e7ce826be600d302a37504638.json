{"remainingRequest":"D:\\userFiles\\20201230\\managersystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\userFiles\\20201230\\managersystem\\src\\components\\roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\userFiles\\20201230\\managersystem\\src\\components\\roles.vue","mtime":1609760292430},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\babel-loader\\lib\\index.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1609391769000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAicm9sZXMiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBmaXJzdDogW10sCiAgICAgIHNlY29uZDogW10sCiAgICAgIGRhdGE6IFtdLAogICAgICBpZDoiIiwKICAgICAgZGlhbG9nVmlzaWJsZTpmYWxzZSwKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgY2hpbGRyZW46ICJjaGlsZHJlbiIsCiAgICAgICAgbGFiZWw6ICJhdXRoTmFtZSIsCiAgICAgIH0sCiAgICAgIHJvbGVzSWQ6W10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRSb2xlcygpIHsKICAgICAgdGhpcy4kcmVxdWVzdC5yb2xlTGlzdCgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIGlmIChyZXMuZGF0YS5tZXRhLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVSb2xlKGluZGV4LHJvdykgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGU9dHJ1ZTsKICAgICAgdGhpcy5pZD1yb3cuaWQ7CiAgICB9LAogICAgZ2V0Um9sZXNBbGwoKXsKICAgICAgdGhpcy4kcmVxdWVzdC5yb2xlQWxsKCJ0cmVlIikudGhlbigocmVzKSA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLojrflj5bop5LoibLliJfooajmiJDlip8iKTsKICAgICAgICAgIHRoaXMuZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0S2V5KCl7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMudHJlZS5nZXRDaGVja2VkTm9kZXMoKSk7CiAgICAgIGNvbnN0IHRoYXQ9dGhpczsKICAgICAgdGhpcy4kcmVmcy50cmVlLmdldENoZWNrZWROb2RlcygpLmZvckVhY2goZnVuY3Rpb24gKGVsZSl7CiAgICAgICAgdGhhdC5yb2xlc0lkLnB1c2goZWxlLmlkKTsKICAgICAgfSk7CiAgICAgIHRoaXMuJHJlcXVlc3QuYXV0aG9yaXphdGlvbih0aGlzLmlkLHtyaWRzOnRoaXMucm9sZXNJZH0pLnRoZW4ocmVzPT57CiAgICAgICAgaWYocmVzLmRhdGEubWV0YS5zdGF0dXM9PTIwMCl7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/ruaUueadg+mZkOaIkOWKnyIpOwogICAgICAgICAKICAgICAgICB9CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnJvbGVzSWQpOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgIGhhbmRsZURlbGV0ZShpbmRleCxyb3cpewogICAgIHRoaXMuJHJlcXVlc3QuZGVsZXRlUm9sZShyb3cuaWQpLnRoZW4ocmVzPT57CiAgICAgICBpZihyZXMuZGF0YS5tZXRhLnN0YXR1cz09MjAwKXsKICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTop5LoibLmiJDlip8iKTsKICAgICAgIH0KICAgICB9KTsKICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Um9sZXMoKTsKICAgIHRoaXMuZ2V0Um9sZXNBbGwoKTsKICB9LAp9Owo="},{"version":3,"sources":["roles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"roles.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"roles\">\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"breadcrumb\">\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>权限管理</el-breadcrumb-item>\n      <el-breadcrumb-item>角色列表</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-button>添加角色</el-button>\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <el-table-column type=\"expand\">\n        <template slot-scope=\"props\">\n          <el-row\n            :span=\"24\"\n            :gutter=\"20\"\n            v-for=\"tag in props.row.children\"\n            :key=\"tag.id\"\n            class=\"row\"\n          >\n            <el-col :span=\"4\"\n              ><el-tag closable type=\"primary\">{{\n                tag.authName\n              }}</el-tag></el-col\n            >\n            <el-col :span=\"20\">\n              <el-row\n                :span=\"24\"\n                :offset=\"4\"\n                v-for=\"item in tag.children\"\n                :key=\"item.id\"\n              >\n                <el-col :span=\"4\"\n                  ><el-tag closable type=\"success\">{{\n                    item.authName\n                  }}</el-tag></el-col\n                >\n                <el-col :span=\"20\">\n                  <el-row>\n                    <el-tag\n                      closable\n                      type=\"warning\"\n                      v-for=\"value in item.children\"\n                      :key=\"value.id\"\n                      >{{ value.authName }}</el-tag\n                    >\n                  </el-row>\n                </el-col>\n              </el-row>\n            </el-col>\n          </el-row>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"#\" type=\"index\" prop=\"id\"> </el-table-column>\n      <el-table-column label=\"角色名称\" prop=\"roleName\"> </el-table-column>\n      <el-table-column label=\"角色描述\" prop=\"roleDesc\"> </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            icon=\"el-icon-edit\"\n            @click=\"handleEdit(scope.$index, scope.row)\"\n          ></el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.$index, scope.row)\"\n          ></el-button>\n          <el-button\n            size=\"mini\"\n            type=\"success\"\n            icon=\"el-icon-check\"\n            @click=\"handleRole(scope.$index, scope.row)\"\n          ></el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"收货地址\" :visible.sync=\"dialogVisible\">\n      <el-tree\n        :data=\"data\"\n        show-checkbox\n        ref=\"tree\"\n        node-key=\"id\"\n        :default-expanded-keys=\"[2, 3]\"\n        :default-checked-keys=\"[5]\"\n        :props=\"defaultProps\"\n        :default-expand-all=\"true\"\n       \n      >\n      </el-tree>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"getKey\"\n          >确 定</el-button\n        >\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"roles\",\n  data() {\n    return {\n      tableData: [],\n      first: [],\n      second: [],\n      data: [],\n      id:\"\",\n      dialogVisible:false,\n      defaultProps: {\n        children: \"children\",\n        label: \"authName\",\n      },\n      rolesId:[]\n    };\n  },\n  methods: {\n    getRoles() {\n      this.$request.roleList().then((res) => {\n        if (res.data.meta.status == 200) {\n          console.log(res);\n          this.tableData = res.data.data;\n        }\n      });\n    },\n    handleRole(index,row) {\n      this.dialogVisible=true;\n      this.id=row.id;\n    },\n    getRolesAll(){\n      this.$request.roleAll(\"tree\").then((res) => {\n        if (res.data.meta.status == 200) {\n          console.log(res);\n      this.$message.success(\"获取角色列表成功\");\n          this.data = res.data.data;\n          console.log(this.data);\n        }\n      });\n    },\n    getKey(){\n      console.log(this.$refs.tree.getCheckedNodes());\n      const that=this;\n      this.$refs.tree.getCheckedNodes().forEach(function (ele){\n        that.rolesId.push(ele.id);\n      });\n      this.$request.authorization(this.id,{rids:this.rolesId}).then(res=>{\n        if(res.data.meta.status==200){\n          this.$message.success(\"修改权限成功\");\n         \n        }\n      });\n      console.log(this.rolesId);\n      this.dialogVisible = false;\n    },\n   handleDelete(index,row){\n     this.$request.deleteRole(row.id).then(res=>{\n       if(res.data.meta.status==200){\n         this.$message.success(\"删除角色成功\");\n       }\n     });\n   }\n  },\n  created() {\n    this.getRoles();\n    this.getRolesAll();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n#roles {\n  .breadcrumb {\n    height: 30px;\n  }\n  .table {\n    .icon-wrapper {\n      text-align: center;\n    }\n    .row {\n      margin-top: 20px;\n      margin-bottom: 20px;\n    }\n  }\n}\n</style>"]}]}