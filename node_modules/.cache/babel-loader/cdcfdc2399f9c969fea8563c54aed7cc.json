{"remainingRequest":"D:\\userFiles\\20201230\\managersystem\\node_modules\\babel-loader\\lib\\index.js!D:\\userFiles\\20201230\\managersystem\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\userFiles\\20201230\\managersystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\userFiles\\20201230\\managersystem\\src\\components\\category.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\userFiles\\20201230\\managersystem\\src\\components\\category.vue","mtime":1609841215743},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\babel-loader\\lib\\index.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1609391769000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjYXRlZ29yeSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICB2YWx1ZTogW10sCiAgICAgIHBhZ2VzaXplOiAxMCwKICAgICAgZm9ybUxhYmVsV2lkdGg6ICIxMjBweCIsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhZGRGb3JtVmlzaWJsZTogZmFsc2UsCgogICAgICAvKiDnvJbovpHliIbnsbvlkI3np7DooajljZUgKi8KICAgICAgZm9ybTogewogICAgICAgIGNhdGVnb3J5TmFtZTogIiIKICAgICAgfSwKCiAgICAgIC8qIOa3u+WKoOWIhuexu+ihqOWNlSAqLwogICAgICBjYXRlZ29yeUZvcm06IHsKICAgICAgICBjYXRfbmFtZTogIiIsCiAgICAgICAgY2F0X3BpZDogIiIsCiAgICAgICAgY2F0X2xldmVsOiAiIgogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU2l6ZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgY29uc29sZS5sb2codmFsKTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICBjb25zb2xlLmxvZyh2YWwpOwogICAgfSwKCiAgICAvKiDnvJbovpHliIbnsbsgKi8KICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uIGhhbmRsZUVkaXQoaW5kZXgsIHJvdykgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmZvcm0uY2F0ZWdvcnlOYW1lID0gcm93LmNhdF9uYW1lOwogICAgICB0aGlzLmZvcm0uaWQgPSByb3cuY2F0X2lkOwogICAgfSwKCiAgICAvKiDliKDpmaTliIbnsbsgKi8KICAgIGhhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKGluZGV4LCByb3cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHJvdyk7CiAgICAgIHRoaXMuJHJlcXVlc3QuZGVsZXRlQ2F0ZWdvcnkocm93LmNhdF9pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5Yig6Zmk5YiG57G75oiQ5YqfIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZSh2YWx1ZSkgewogICAgICB0aGlzLmNhdGVnb3J5Rm9ybS5jYXRfbGV2ZWwgPSB2YWx1ZS5sZW5ndGg7CiAgICAgIHRoaXMuY2F0ZWdvcnlGb3JtLmNhdF9waWQgPSB2YWx1ZVswXTsKICAgIH0sCgogICAgLyog5re75Yqg5YiG57G7ICovCiAgICBhZGRDYXRlZ29yeTogZnVuY3Rpb24gYWRkQ2F0ZWdvcnkoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVxdWVzdC5hZGRDYXRlZ29yeSh0aGlzLmNhdGVnb3J5Rm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICBjb25zb2xlLmxvZyhfdGhpczIuY2F0ZWdvcnlGb3JtKTsKCiAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzID09IDIwMSkgewogICAgICAgICAgY29uc29sZS5sZ28ocmVzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmFkZEZvcm1WaXNpYmxlID0gZmFsc2U7CiAgICB9LAoKICAgIC8qIOehruWumuS/ruaUuSAqLwogICAgaGFuZGxlQ29uZmlybTogZnVuY3Rpb24gaGFuZGxlQ29uZmlybSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLiRyZXF1ZXN0LmVkaXRDYXRlZ29yeSh0aGlzLmZvcm0uaWQsIHsKICAgICAgICBjYXRfbmFtZTogdGhpcy5mb3JtLmNhdGVnb3J5TmFtZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEubWV0YS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2Uuc3VjY2Vzcygi57yW6L6R5oiQ5YqfIik7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAoKICAgIC8qIOiOt+WPluWIhuexu+WIl+ihqCAqLwogICAgZ2V0Q2F0ZWdvcmllczogZnVuY3Rpb24gZ2V0Q2F0ZWdvcmllcygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLiRyZXF1ZXN0LmdldENhdGVnb3JpZXMoewogICAgICAgIHR5cGU6IFsxLCAyLCAzXQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEubWV0YS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgX3RoaXM0LnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENhdGVnb3JpZXMoKTsKICB9Cn07"},{"version":3,"sources":["category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA,CAFA;AAGA,MAAA,KAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,cAAA,EAAA,OALA;AAMA,MAAA,aAAA,EAAA,KANA;AAOA,MAAA,cAAA,EAAA,KAPA;;AAQA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,YAAA,EAAA;AADA,OATA;;AAYA;AACA,MAAA,YAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,OAAA,EAAA,EAFA;AAGA,QAAA,SAAA,EAAA;AAHA;AAbA,KAAA;AAmBA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,4BACA,GADA,EACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AAGA,KALA;AAMA,IAAA,mBANA,+BAMA,GANA,EAMA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,KARA;;AASA;AACA,IAAA,UAVA,sBAUA,KAVA,EAUA,GAVA,EAUA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,WAAA,IAAA,CAAA,YAAA,GAAA,GAAA,CAAA,QAAA;AACA,WAAA,IAAA,CAAA,EAAA,GAAA,GAAA,CAAA,MAAA;AACA,KAdA;;AAeA;AACA,IAAA,YAhBA,wBAgBA,KAhBA,EAgBA,GAhBA,EAgBA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,WAAA,QAAA,CAAA,cAAA,CAAA,GAAA,CAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,QAAA;AACA;AACA,OAJA;AAKA,KAvBA;AAwBA,IAAA,YAxBA,wBAwBA,KAxBA,EAwBA;AACA,WAAA,YAAA,CAAA,SAAA,GAAA,KAAA,CAAA,MAAA;AACA,WAAA,YAAA,CAAA,OAAA,GAAA,KAAA,CAAA,CAAA,CAAA;AACA,KA3BA;;AA4BA;AACA,IAAA,WA7BA,yBA6BA;AAAA;;AACA,WAAA,QAAA,CAAA,WAAA,CAAA,KAAA,YAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,YAAA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA;AACA,OANA;AAOA,WAAA,cAAA,GAAA,KAAA;AACA,KAtCA;;AAuCA;AACA,IAAA,aAxCA,2BAwCA;AAAA;;AACA,WAAA,QAAA,CACA,YADA,CACA,KAAA,IAAA,CAAA,EADA,EACA;AACA,QAAA,QAAA,EAAA,KAAA,IAAA,CAAA;AADA,OADA,EAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA;AACA;AACA,OARA;AASA,WAAA,aAAA,GAAA,KAAA;AACA,KAnDA;;AAoDA;AACA,IAAA,aArDA,2BAqDA;AAAA;;AACA,WAAA,QAAA,CACA,aADA,CACA;AACA,QAAA,IAAA,EAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA;AADA,OADA,EAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,UAAA,MAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,OATA;AAUA;AAhEA,GAvBA;AAyFA,EAAA,OAzFA,qBAyFA;AACA,SAAA,aAAA;AACA;AA3FA,CAAA","sourcesContent":["<template>\n  <div id=\"category\">\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"breadcrumb\">\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\n      <el-breadcrumb-item>商品分类</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-button\n      type=\"success\"\n      class=\"success-btn\"\n      @click=\"addFormVisible = true\"\n      plain\n      >添加分类</el-button\n    >\n    <el-dialog title=\"添加分类\" :visible.sync=\"addFormVisible\">\n      <el-form :model=\"categoryForm\">\n        <el-form-item label=\"分类名称\" :label-width=\"formLabelWidth\">\n          <el-input\n            v-model=\"categoryForm.cat_name\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"分类父级\" :label-width=\"formLabelWidth\">\n          <el-cascader\n              v-model=\"value\"\n              :options=\"tableData\"\n              :props=\"{ expandTrigger: 'hover' ,label:'cat_name',value:'cat_id'}\"\n              @change=\"handleChange\"\n            ></el-cascader>\n         <!--  <el-select v-model=\"categoryForm.cat_id\" placeholder=\"请选择父级\">\n            \n            <el-option\n              v-for=\"item in tableData\"\n              :key=\"item.cat_id\"\n              :value=\"item.cat_id\"\n              :label=\"item.cat_name\"\n            ></el-option>\n          </el-select> -->\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addCategory\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <el-table\n      :data=\"tableData\"\n      style=\"width: 100%; margin-bottom: 20px\"\n      row-key=\"cat_id\"\n      border\n      default-expand-all\n      :tree-props=\"{ children: 'children' }\"\n    >\n      <el-table-column prop=\"cat_name\" label=\"分类名称\" sortable width=\"180\">\n      </el-table-column>\n      <el-table-column label=\"级别\" sortable width=\"180\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.cat_level + 1 + \"级\" }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"address\" label=\"是否有效\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.cat_deleted ? \"无效\" : \"有效\" }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"address\" label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            icon=\"el-icon-edit\"\n            @click=\"handleEdit(scope.$index, scope.row)\"\n          ></el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.$index, scope.row)\"\n          ></el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"编辑商品分类\" :visible.sync=\"dialogVisible\">\n      <el-form :model=\"form\">\n        <el-form-item label=\"分类名称\" label-width=\"120px\">\n          <el-input v-model=\"form.categoryName\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleConfirm\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <el-pagination\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"currentPage\"\n      :page-sizes=\"[10, 20, 30, 40]\"\n      :page-size=\"pagesize\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"tableData.length\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"category\",\n  data() {\n    return {\n      tableData: [],\n      currentPage: 1,\n      value:[],\n      pagesize: 10,\n      formLabelWidth: \"120px\",\n      dialogVisible: false,\n      addFormVisible: false,\n      /* 编辑分类名称表单 */\n      form: {\n        categoryName: \"\",\n      },\n      /* 添加分类表单 */\n      categoryForm: {\n        cat_name: \"\",\n        cat_pid: \"\",\n        cat_level: \"\",\n      },\n    };\n  },\n  methods: {\n    handleSizeChange(val) {\n      console.log(val);\n     \n\n    },\n    handleCurrentChange(val) {\n      console.log(val);\n    },\n    /* 编辑分类 */\n    handleEdit(index, row) {\n      this.dialogVisible = true;\n      this.form.categoryName = row.cat_name;\n      this.form.id = row.cat_id;\n    },\n    /* 删除分类 */\n    handleDelete(index, row) {\n      console.log(row);\n      this.$request.deleteCategory(row.cat_id).then((res) => {\n        if (res.data.meta.status == 200) {\n          this.$message.success(\"删除分类成功\");\n        }\n      });\n    },\n    handleChange(value){\n       this.categoryForm.cat_level=value.length;\n       this.categoryForm.cat_pid=value[0];\n    },\n    /* 添加分类 */\n    addCategory() {\n      this.$request.addCategory(this.categoryForm).then((res) => {\n        console.log(res);\n        console.log(this.categoryForm);\n        if (res.data.meta.status == 201) {\n          console.lgo(res);\n        }\n      });\n      this.addFormVisible = false;\n    },\n    /* 确定修改 */\n    handleConfirm() {\n      this.$request\n        .editCategory(this.form.id, {\n          cat_name: this.form.categoryName,\n        })\n        .then((res) => {\n          if (res.data.meta.status == 200) {\n            this.$message.success(\"编辑成功\");\n          }\n        });\n      this.dialogVisible = false;\n    },\n    /* 获取分类列表 */\n    getCategories() {\n      this.$request\n        .getCategories({\n          type: [1, 2, 3],\n        })\n        .then((res) => {\n          if (res.data.meta.status == 200) {\n            console.log(res);\n            this.tableData = res.data.data;\n          }\n        });\n    },\n  },\n  created() {\n    this.getCategories();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n#category {\n  .breadcrumb {\n    height: 50px;\n    line-height: 50px;\n  }\n  .success-btn {\n    margin-top: 20px;\n    margin-bottom: 20px;\n  }\n  .select-wrapper {\n    .select-title {\n      h2 {\n        height: 40px;\n        line-height: 40px;\n      }\n    }\n  }\n}\n</style>"],"sourceRoot":"src/components"}]}