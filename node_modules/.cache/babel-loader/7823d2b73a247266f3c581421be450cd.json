{"remainingRequest":"D:\\userFiles\\20201230\\managersystem\\node_modules\\babel-loader\\lib\\index.js!D:\\userFiles\\20201230\\managersystem\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\userFiles\\20201230\\managersystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\userFiles\\20201230\\managersystem\\src\\components\\roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\userFiles\\20201230\\managersystem\\src\\components\\roles.vue","mtime":1609843189577},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\babel-loader\\lib\\index.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609391769000},{"path":"D:\\userFiles\\20201230\\managersystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1609391769000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJyb2xlcyIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGZpcnN0OiBbXSwKICAgICAgc2Vjb25kOiBbXSwKICAgICAgZGF0YTogW10sCiAgICAgIGlkOiAiIiwKICAgICAgZm9ybUxhYmVsV2lkdGg6ICIxMjBweCIsCiAgICAgIGVkaXRSb2xlRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBlZGl0Um9sZUZvcm1EYXRhOiB7CiAgICAgICAgcm9sZU5hbWU6ICIiLAogICAgICAgIHJvbGVEZXNjOiAiIgogICAgICB9LAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgY2hpbGRyZW46ICJjaGlsZHJlbiIsCiAgICAgICAgbGFiZWw6ICJhdXRoTmFtZSIKICAgICAgfSwKICAgICAgcm9sZXNJZDogW10sCiAgICAgIGNoZWNrZWRLZXlzOiBbXSwKICAgICAgYWRkUm9sZUZvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgYWRkUm9sZUZvcm1EYXRhOiB7CiAgICAgICAgcm9sZU5hbWU6ICIiLAogICAgICAgIHJvbGVEZXNjOiAiIgogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLyog6I635Y+W6KeS6Imy5YiX6KGoICovCiAgICBnZXRSb2xlczogZnVuY3Rpb24gZ2V0Um9sZXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRyZXF1ZXN0LnJvbGVMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIF90aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLyog6I635Y+W5b2T5YmN6KeS6Imy5p2D6ZmQICovCiAgICBoYW5kbGVSb2xlOiBmdW5jdGlvbiBoYW5kbGVSb2xlKGluZGV4LCByb3cpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5jaGVja2VkS2V5cyA9IFtdOwogICAgICByb3cuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uIChlbGUpIHsKICAgICAgICB0aGlzLmNoZWNrZWRLZXlzLnB1c2goZWxlLmlkKTsKICAgICAgfSwgdGhpcyk7CiAgICAgIHRoaXMuaWQgPSByb3cuaWQ7CiAgICB9LAoKICAgIC8qIOiOt+WPluadg+mZkOWIl+ihqCAqLwogICAgZ2V0Um9sZXNBbGw6IGZ1bmN0aW9uIGdldFJvbGVzQWxsKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJHJlcXVlc3Qucm9sZUFsbCgidHJlZSIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5tZXRhLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MoIuiOt+WPluinkuiJsuWIl+ihqOaIkOWKnyIpOwoKICAgICAgICAgIF90aGlzMi5kYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMi5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiDorr7nva7mnYPpmZAgKi8KICAgIGdldEtleTogZnVuY3Rpb24gZ2V0S2V5KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMudHJlZS5nZXRDaGVja2VkTm9kZXMoKSk7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhpcy4kcmVmcy50cmVlLmdldENoZWNrZWROb2RlcygpLmZvckVhY2goZnVuY3Rpb24gKGVsZSkgewogICAgICAgIHRoYXQucm9sZXNJZC5wdXNoKGVsZS5pZCk7CiAgICAgIH0pOwogICAgICB0aGlzLiRyZXF1ZXN0LmF1dGhvcml6YXRpb24odGhpcy5pZCwgewogICAgICAgIHJpZHM6IHRoaXMucm9sZXNJZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEubWV0YS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+u5pS55p2D6ZmQ5oiQ5YqfIik7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy5yb2xlc0lkKTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAoKICAgIC8qIOWIoOmZpOinkuiJsiAqLwogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuJHJlcXVlc3QuZGVsZXRlUm9sZShyb3cuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5tZXRhLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIF90aGlzNC4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTop5LoibLmiJDlip8iKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiDnvJbovpHop5LoibIgKi8KICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uIGhhbmRsZUVkaXQoaW5kZXgsIHJvdykgewogICAgICB0aGlzLmVkaXRSb2xlRm9ybVZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmlkID0gcm93LmlkOwogICAgICB0aGlzLmVkaXRSb2xlRm9ybURhdGEucm9sZU5hbWUgPSByb3cucm9sZU5hbWU7CiAgICAgIHRoaXMuZWRpdFJvbGVGb3JtRGF0YS5yb2xlRGVzYyA9IHJvdy5yb2xlRGVzYzsKICAgIH0sCgogICAgLyog56Gu6K6k57yW6L6RICovCiAgICBoYW5kbGVDb25maXJtRWRpdDogZnVuY3Rpb24gaGFuZGxlQ29uZmlybUVkaXQoKSB7CiAgICAgIHRoaXMuZWRpdFJvbGVGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLiRyZXF1ZXN0LmVkaXRSb2xlQnlJZCh0aGlzLmlkLCB0aGlzLmVkaXRSb2xlRm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5tZXRhLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVDb25maXJtQWRkOiBmdW5jdGlvbiBoYW5kbGVDb25maXJtQWRkKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuYWRkUm9sZUZvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuJHJlcXVlc3QuYWRkUm9sZSh0aGlzLmFkZFJvbGVGb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLm1ldGEuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgX3RoaXM1LiRtZXNzYWdlLnN1Y2Nlc3MoIua3u+WKoOeUqOaIt+aIkOWKnyIpOwoKICAgICAgICAgIF90aGlzNS5nZXRSb2xlcygpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQWRkOiBmdW5jdGlvbiBoYW5kbGVBZGQoKSB7CiAgICAgIHRoaXMuYWRkUm9sZUZvcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFJvbGVzKCk7CiAgICB0aGlzLmdldFJvbGVzQWxsKCk7CiAgfQp9Ow=="},{"version":3,"sources":["roles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,EAHA;AAIA,MAAA,IAAA,EAAA,EAJA;AAKA,MAAA,EAAA,EAAA,EALA;AAMA,MAAA,cAAA,EAAA,OANA;AAOA,MAAA,mBAAA,EAAA,KAPA;AAQA,MAAA,gBAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OARA;AAYA,MAAA,aAAA,EAAA,KAZA;AAaA,MAAA,YAAA,EAAA;AACA,QAAA,QAAA,EAAA,UADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAbA;AAiBA,MAAA,OAAA,EAAA,EAjBA;AAkBA,MAAA,WAAA,EAAA,EAlBA;AAmBA,MAAA,kBAAA,EAAA,KAnBA;AAoBA,MAAA,eAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA;AApBA,KAAA;AAyBA,GA5BA;AA6BA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,QAFA,sBAEA;AAAA;;AACA,WAAA,QAAA,CAAA,QAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,UAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,OALA;AAMA,KATA;;AAUA;AACA,IAAA,UAXA,sBAWA,KAXA,EAWA,GAXA,EAWA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,WAAA,WAAA,GAAA,EAAA;AACA,MAAA,GAAA,CAAA,QAAA,CAAA,MAAA,CAAA,UAAA,GAAA,EAAA;AACA,aAAA,WAAA,CAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA,OAFA,EAEA,IAFA;AAGA,WAAA,EAAA,GAAA,GAAA,CAAA,EAAA;AACA,KAlBA;;AAmBA;AACA,IAAA,WApBA,yBAoBA;AAAA;;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,UAAA;;AACA,UAAA,MAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,IAAA;AACA;AACA,OAPA;AAQA,KA7BA;;AA8BA;AACA,IAAA,MA/BA,oBA+BA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,KAAA,CAAA,IAAA,CAAA,eAAA,EAAA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,eAAA,GAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA,OAFA;AAGA,WAAA,QAAA,CACA,aADA,CACA,KAAA,EADA,EACA;AAAA,QAAA,IAAA,EAAA,KAAA;AAAA,OADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,QAAA;AACA;AACA,OANA;AAOA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,OAAA;AACA,WAAA,aAAA,GAAA,KAAA;AACA,KA9CA;;AA+CA;AACA,IAAA,YAhDA,wBAgDA,KAhDA,EAgDA,GAhDA,EAgDA;AAAA;;AACA,WAAA,QAAA,CAAA,UAAA,CAAA,GAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,QAAA;AACA;AACA,OAJA;AAKA,KAtDA;;AAuDA;AACA,IAAA,UAxDA,sBAwDA,KAxDA,EAwDA,GAxDA,EAwDA;AACA,WAAA,mBAAA,GAAA,IAAA;AACA,WAAA,EAAA,GAAA,GAAA,CAAA,EAAA;AACA,WAAA,gBAAA,CAAA,QAAA,GAAA,GAAA,CAAA,QAAA;AACA,WAAA,gBAAA,CAAA,QAAA,GAAA,GAAA,CAAA,QAAA;AACA,KA7DA;;AA8DA;AACA,IAAA,iBA/DA,+BA+DA;AACA,WAAA,mBAAA,GAAA,KAAA;AACA,WAAA,QAAA,CAAA,YAAA,CAAA,KAAA,EAAA,EAAA,KAAA,gBAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA;AACA,OAJA;AAKA,KAtEA;AAuEA,IAAA,gBAvEA,8BAuEA;AAAA;;AACA,WAAA,kBAAA,GAAA,KAAA;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,KAAA,eAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,QAAA;;AACA,UAAA,MAAA,CAAA,QAAA;AACA;AACA,OALA;AAMA,KA/EA;AAgFA,IAAA,SAhFA,uBAgFA;AACA,WAAA,kBAAA,GAAA,IAAA;AACA;AAlFA,GA7BA;AAiHA,EAAA,OAjHA,qBAiHA;AACA,SAAA,QAAA;AACA,SAAA,WAAA;AACA;AApHA,CAAA","sourcesContent":["<template>\n  <div id=\"roles\">\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"breadcrumb\">\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>权限管理</el-breadcrumb-item>\n      <el-breadcrumb-item>角色列表</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-button @click=\"handleAdd\">添加角色</el-button>\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <el-table-column type=\"expand\">\n        <template slot-scope=\"props\">\n          <el-row\n            :span=\"24\"\n            :gutter=\"20\"\n            v-for=\"tag in props.row.children\"\n            :key=\"tag.id\"\n            class=\"row\"\n          >\n            <el-col :span=\"4\"\n              ><el-tag closable type=\"primary\">{{\n                tag.authName\n              }}</el-tag></el-col\n            >\n            <el-col :span=\"20\">\n              <el-row\n                :span=\"24\"\n                :offset=\"4\"\n                v-for=\"item in tag.children\"\n                :key=\"item.id\"\n              >\n                <el-col :span=\"4\"\n                  ><el-tag closable type=\"success\">{{\n                    item.authName\n                  }}</el-tag></el-col\n                >\n                <el-col :span=\"20\">\n                  <el-row>\n                    <el-tag\n                      closable\n                      type=\"warning\"\n                      v-for=\"value in item.children\"\n                      :key=\"value.id\"\n                      >{{ value.authName }}</el-tag\n                    >\n                  </el-row>\n                </el-col>\n              </el-row>\n            </el-col>\n          </el-row>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"#\" type=\"index\" prop=\"id\"> </el-table-column>\n      <el-table-column label=\"角色名称\" prop=\"roleName\"> </el-table-column>\n      <el-table-column label=\"角色描述\" prop=\"roleDesc\"> </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            icon=\"el-icon-edit\"\n            @click=\"handleEdit(scope.$index, scope.row)\"\n          ></el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.$index, scope.row)\"\n          ></el-button>\n          <el-button\n            size=\"mini\"\n            type=\"success\"\n            icon=\"el-icon-check\"\n            @click=\"handleRole(scope.$index, scope.row)\"\n          ></el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"添加角色\" :visible.sync=\"addRoleFormVisible\">\n      <el-form :model=\"addRoleFormData\">\n        <el-form-item label=\"角色名称\" :label-width=\"formLabelWidth\">\n          <el-input\n            v-model=\"addRoleFormData.roleName\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色描述\" :label-width=\"formLabelWidth\">\n          <el-input\n            v-model=\"addRoleFormData.roleDesc\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editRoleFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleConfirmAdd\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <el-dialog title=\"编辑角色\" :visible.sync=\"editRoleFormVisible\">\n      <el-form :model=\"editRoleFormData\">\n        <el-form-item label=\"角色名称\" :label-width=\"formLabelWidth\">\n          <el-input\n            v-model=\"editRoleFormData.roleName\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色描述\" :label-width=\"formLabelWidth\">\n          <el-input\n            v-model=\"editRoleFormData.roleDesc\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editRoleFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleConfirmEdit\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <el-dialog title=\"权限列表\" :visible.sync=\"dialogVisible\">\n      <el-tree\n        :data=\"data\"\n        show-checkbox\n        ref=\"tree\"\n        node-key=\"id\"\n        :default-expanded-keys=\"[2, 3]\"\n        :default-checked-keys=\"checkedKeys\"\n        :props=\"defaultProps\"\n        :default-expand-all=\"true\"\n      >\n      </el-tree>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"getKey\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"roles\",\n  data() {\n    return {\n      tableData: [],\n      first: [],\n      second: [],\n      data: [],\n      id: \"\",\n      formLabelWidth: \"120px\",\n      editRoleFormVisible: false,\n      editRoleFormData: {\n        roleName: \"\",\n        roleDesc: \"\",\n      },\n      dialogVisible: false,\n      defaultProps: {\n        children: \"children\",\n        label: \"authName\",\n      },\n      rolesId: [],\n      checkedKeys: [],\n      addRoleFormVisible:false,\n      addRoleFormData:{\n        roleName:\"\",\n        roleDesc:\"\"\n      }\n    };\n  },\n  methods: {\n    /* 获取角色列表 */\n    getRoles() {\n      this.$request.roleList().then((res) => {\n        if (res.data.meta.status == 200) {\n          console.log(res);\n          this.tableData = res.data.data;\n        }\n      });\n    },\n    /* 获取当前角色权限 */\n    handleRole(index, row) {\n      this.dialogVisible = true;\n      this.checkedKeys = [];\n      row.children.filter(function (ele) {\n        this.checkedKeys.push(ele.id);\n      }, this);\n      this.id = row.id;\n    },\n    /* 获取权限列表 */\n    getRolesAll() {\n      this.$request.roleAll(\"tree\").then((res) => {\n        if (res.data.meta.status == 200) {\n          console.log(res);\n          this.$message.success(\"获取角色列表成功\");\n          this.data = res.data.data;\n          console.log(this.data);\n        }\n      });\n    },\n    /* 设置权限 */\n    getKey() {\n      console.log(this.$refs.tree.getCheckedNodes());\n      const that = this;\n      this.$refs.tree.getCheckedNodes().forEach(function (ele) {\n        that.rolesId.push(ele.id);\n      });\n      this.$request\n        .authorization(this.id, { rids: this.rolesId })\n        .then((res) => {\n          if (res.data.meta.status == 200) {\n            this.$message.success(\"修改权限成功\");\n          }\n        });\n      console.log(this.rolesId);\n      this.dialogVisible = false;\n    },\n    /* 删除角色 */\n    handleDelete(index, row) {\n      this.$request.deleteRole(row.id).then((res) => {\n        if (res.data.meta.status == 200) {\n          this.$message.success(\"删除角色成功\");\n        }\n      });\n    },\n    /* 编辑角色 */\n    handleEdit(index, row) {\n      this.editRoleFormVisible = true;\n      this.id = row.id;\n      this.editRoleFormData.roleName=row.roleName;\n      this.editRoleFormData.roleDesc=row.roleDesc;\n    },\n    /* 确认编辑 */\n    handleConfirmEdit() {\n      this.editRoleFormVisible = false;\n      this.$request.editRoleById(this.id, this.editRoleFormData).then((res) => {\n        if (res.data.meta.status == 200) {\n          console.log(res);\n        }\n      });\n    },\n    handleConfirmAdd(){\n      this.addRoleFormVisible=false;\n      this.$request.addRole(this.addRoleFormData).then(res=>{\n        if(res.data.meta.status==200){\n          this.$message.success(\"添加用户成功\");\n          this.getRoles();\n        }\n      });\n    },\n    handleAdd(){\n      this.addRoleFormVisible=true;\n    }\n  },\n  created() {\n    this.getRoles();\n    this.getRolesAll();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n#roles {\n  .breadcrumb {\n    height: 30px;\n  }\n  .table {\n    .icon-wrapper {\n      text-align: center;\n    }\n    .row {\n      margin-top: 20px;\n      margin-bottom: 20px;\n    }\n  }\n}\n</style>"],"sourceRoot":"src/components"}]}